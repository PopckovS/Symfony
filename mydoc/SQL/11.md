##SQL Урок 11

###Соединения, комбинированные запросы.
Это происходит при помощи спец слова UNION, который позволяет 
многократно исполльзовать SELECT.

Где это может понадовится, к примеру нам требуется сделать выборку всех
клинтов из определенных штатов, и дополнительно к этому в не зависимости
от штата, выбрать пользователя с именем Fun4All.

Извлечем всех пользователей нужных штатов:

    SELECT * 
    FROM Customers
    WHERE cust_state IN ('IL', 'IN', 'MI');

    // Вернет 3 строки

Извлечем данные конкретного человека:

    SELECT * 
    FROM Customers
    WHERE cust_name = 'Fun4All';

    // Вернет 2 строки

А их комбинация делается при помощи UNION. Можем увидеть что первый
запрос вернул 3 строки, второй 2 строки, и одна из строк дублируется
так что в результате получаем 4 строки, потому что дублированные строки
в результат не попали.

    SELECT * 
    FROM Customers
    WHERE cust_state IN ('IL', 'IN', 'MI');
    UNION
    SELECT * 
    FROM Customers
    WHERE cust_name = 'Fun4All';

    // Вернет 4 строки 

По мимо UNION можно решить эту задачу при помощи WHERE. Таким образом
мы выбираем

    SELECT *
    FROM Customers
    WHERE cust_state IN ('IL', 'IN', 'MI');
    OR cust_name = 'Fun4All';

Есть правила:

1. Каждый запрос должен быть разделен своим собственным UNION.
2. Каждый запрос SELECT должен содержать одинаковые столбцы 
   и итоговые(агрегатные) функции, это нужно чтобы количество 
   столбцов было одинаковым.
3. Типы данных столбцов должны совпадать, столбцы не обезательно
   должны быть именно тогоже типа,о должны быть того типа
   который СУБД сможет неявно преобразовать в схожие типы.

### Включение или сключение повторяющихся строк. UNION ALL
Как было видно раньше, в результате мы получили 4 строки, потому что
одна из них дублируется. Это стандартное поведение UNION, но его можно 
изменить, чтобы получать все вхождения даже те что повторяются,  
для этого используется оператор `UNION ALL`

### Сортировка результатов комбинированных запросов.
При использовании UNION для каждого SELECT использовать сортировку
ORDER BY запрещено. В место этого сортировка ORDER BY применяется ко 
всему что было выбрано, и указывается один раз после заключительного 
последнего SELECT.

    SELECT * 
    FROM Customers
    WHERE cust_state IN ('IL', 'IN', 'MI');

    UNION ALL

    SELECT * 
    FROM Customers
    WHERE cust_name = 'Fun4All';

    ORDER BY cust_name, cust_contact;






























