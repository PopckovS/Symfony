##SQL Урок 3

Комментарии записываются в `/* */` или в `#`

Первичные ключи:
1) 2 разных строки не могут содержать одно значение первичного ключа.
2) Каждая строка должна иметь значение, оно не может быть NULL.
3) Значения нельзя использовать дважды, если удален то переиспользовать нельзя.

####1. Извлечение одного или нескольких столбцов
Получить всю колонку, все записи одного атрибута, из одной таблицы.


    //Оба варианта равноценны
    SELECT prod_name
    FROM Products;

    // Или этот вариант 
    SELECT Products.prod_name 
    FROM Products;

    // Ответ вся колонка
    12 inch teddy bear
    8 inch teddy bear
    Rabbit bean bag toy

Аналогично это будет работать и с извлечением нескольких столбцов таблицы. 

    SELECT prod_id, prod_name, prod_price 
    FROM Products;

####2.Извлечение всех столбцов таблицы SELECT
Извлекает всю таблицу.

    SELECT * 
    FROM Products;

####3.Извлечение уникальных строк DISTINCT
Можно выбрать все записи из колонки, но эти хаписи могут повторятся, для
того чтобы выбрать только уникальные записи из колонки, следует использовать 
специальное слово DISTINCT.

    // Изьять все записи из колонки 
    SELECT vend_id
    FROM Products;

    // Ответ: изьяты все записи и они дублируются
    BRS01
    DLL01
    FNG01
    BRS01
    DLL01
    FNG01

    // Изьять из колонки только уникальные значения
    SELECT DISTINCT vend_id
    FROM Products;

    // Ответ: только уникальные начения
    BRS01
    DLL01
    FNG01

Ключевое слово `DISTINCT` применяется ко всем столбцам, а не только к тем 
перед которым оно стоит, сделаем выборку уникальных значений сразу по 2 
столбцам, и увидим что некотрые поля дублируются, НО ! сама строка 
именно по 2значениям из столбцов всегда уникальны и не дублируются.

    SELECT DISTINCT vend_id, prod_price
    FROM Products;


    DLL01 3.49
    BRS01 5.99
    BRS01 8.99
    FNG01 9.49

Как можем видить в ответе, есть одинаковые поставщики но сумарно по обоим 
полям, строки уникальны и не дублируются. 

####4.Ограницение результатов запроса LIMIT
Для ограничения выборки, чтобы указать сколько строк мы хотим выбрать, и с 
какой позиции, используется ключевое слово `LIMIT`

    // Выбрать первые пять записей с 1 по 5 
    SELECT prod_name
    FROM Products
    LIMIT 5;

    // Выбрать 5 строк с верху пропустив первые 5 строк
    SELECT prod_name
    FROM Products
    LIMIT 5 OFFSET 5;



####5. Сортировка полученных данных ORDER BY
При выборке, данные возвращаются в рандомном неупорядоченном порядке, 
для их сортировки используется слово `ORDER BY` после него указываются 
один или несколько столбцов по которым будет идти сортировка, начала 
по одному полю, потом по другому.

    // Произвольный порядок
    SELECT prod_name
    FROM Products;

    // Неотсортироанные данные
    Bird bean bag toy
    12 inch teddy bear
    8 inch teddy bear
    18 inch teddy bear

    // Отсортированные по полю prod_name
    SELECT prod_name
    FROM Products
    ORDER BY prod_name;

    // Отсортированные данные
    12 inch teddy bear
    18 inch teddy bear
    8 inch teddy bear
    Bird bean bag toy

Обычно колонка по которой происходит сортировка,тображается в запросе SELECT
однако это не обезательно, и сортировать можно по полю которое не будет 
включено в запрос SELECT.


Также можно указать сортировку по номеру извлекаемого столбца, 

    SELECT prod_id, prod_prie, prod_name
    FROM Products
    ORDER BY 2, 3 

Однако в таком случае необходимо обезательно указывать поля по которым 
сортируем в выборке SELECT. 

####6.Указать направление сортировки ASC или DESC
Стандартно данные сортируются по возрастанияю от А...Я от 1...100 этот способ 
сортировки указывается словом ASC илиже стоит по умолчанию. Для того чтобы казать 
сортировку в обратном порядке от большего к сеньшему от 100...1 от Я...А
то требуется указать ключевое слово DESC.

    // Данные выбирабтся такимже образом как и впревер примере
    // Но сортируются в обратном порядке
    SELECT prod_name
    FROM Products
    ORDER BY prod_name DESC;

    // Отсортированные данные
    Bird bean bag toy
    8 inch teddy bear
    18 inch teddy bear
    12 inch teddy bear

ASC и DESC применяетс ятолько к тому столбу перед которым оно стоит.

Эти ключевые слов являются сокращениями от:

ASC  - DESCENDING

DESC - ASCENDING

####7.Фильтрация данных WHERE
Позволяет выбирать данные у которых есть некий признак

    SELECT prod_name, prod_price
    FROM Products
    WHERE prod_price = '3.49';

Сортировка ORDER BY должен идти после выборки WHERE.

Операторы предложения WHERE :

    =     Равенство
    <>    Неравенство
    !=    Неравенство
    <     Меньше
    <=    Меньше равно
    !<    Не меньше
    >     Больше
    >=    Бельше равно
    !>    Не больше
    BETWEEN  Находится в Диапозоне значений 
    IS NULL  Равно спец типу NULL

Примеры:
    
    // Там где цена меньше 10
    WHERE prod_price < 10

    // Равно 10 или меньше этого
    WHERE prod_price <= 10

    // Внешние ключи могут быть не только id типа, но и типа varchar, тоесть строкой
    // Получить запись из таблицы где столбец с названием vend_id чвляющийся внешним
    // ключом к другой таблице равен DLL01
    WHERE vend_id = 'DLL01';

    // Получить все записи кроме DLL01
    WHERE vend_id <> 'DLL01';
    WHERE vend_id != 'DLL01';

    // Получить данные в промежутке значений
    WHERE prod_price BETWEEN 5 AND 10;

            // Ответ
            5.99
            8.99
            9.99
            9.99

####8.Расширенная фильтрация данных WHERE, AND, OR, NOT, IN. 
Примеры более сложных фильтраций, с использованием ключевых слов.

OR возвращает если запись удовлетворяет одному из двух условий.

Порядок обработки оператора AND выше чем у OR, 

Оперратор IN указывает ято надо извлечь данные из списка указанных значений.
        
        // Будут выбраны товары этих поставщиков
        WHERE vend_id IN ('DLL01', 'BRS01')

Оператор IN равносилен оператору OR.

Оператор NOT равносилен <> или != 

####9.Фильтрация с использованием метасимволов LIKE()


    %   -  любое количество символов

    _   -  только один любой символ

    []  -  любой из переданных в скобки символов
    [JM]% - любая строка начинающаяся с символа J или M

    [^JM] - символ ^ означает НЕ тоесть найти 
            все что не начинается с J или M


















